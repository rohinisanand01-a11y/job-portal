<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Amdox | Jobs</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/cs.css') }}">
<style>
.search-box{width:100%;max-width:400px;padding:12px 20px;margin-right:10px;border:2px solid #ddd;border-radius:25px;font-size:16px;}
.search-box:focus{outline:none;border-color:#0d6efd;}
.verified-badge{background:#e7f1ff;color:#0d6efd;font-size:12px;padding:4px 10px;border-radius:20px;display:inline-block;margin-top:5px;font-weight:600;}
.job-card{background:white;border:1px solid #ddd;border-radius:10px;padding:20px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.job-card:hover{box-shadow:0 5px 20px rgba(0,0,0,0.15);}
.job-title{color:#0d6efd;font-size:1.4em;margin:0 0 10px 0;}
.job-salary{background:#d4edda;color:#155724;padding:6px 12px;border-radius:20px;font-weight:bold;display:inline-block;margin:5px 0;}
.filters{background:white;padding:20px;border-radius:10px;margin-bottom:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);}
.apply-btn{background:#28a745;color:white;padding:12px 24px;border:none;border-radius:6px;cursor:pointer;font-size:16px;width:100%;margin-top:15px;font-weight:600;text-decoration:none;display:block;text-align:center;}
.apply-btn:hover{background:#218838;}
.jobs-empty{text-align:center;padding:60px 20px;color:#666;}
.navbar{background:#0d6efd;color:white;padding:15px 20px;}
.navbar .logo{font-size:24px;font-weight:bold;}
.navbar .logo span{color:#fd7e14;}
.navbar nav a{color:white;margin-left:20px;text-decoration:none;}
</style>
</head>
<body>
<header class="navbar">
  <div class="logo">Amdox<span>Jobs</span></div>
  <nav>
    <a href="{{ url_for('jobs') }}">Home</a>
    <a href="{{ url_for('jobs') }}">Jobs</a>
    <a href="{{ url_for('profile') }}">Profile</a>
    <a href="{{ url_for('applied_dashboard') }}">My Applications</a>
    <a href="{{ url_for('logout') }}">Logout</a>
  </nav>
</header>

<section class="filters">
  <div style="display:flex;flex-wrap:wrap;gap:15px;align-items:center;">
    <input type="text" id="searchInput" class="search-box" placeholder="üîç Search job title, company..." onkeyup="filterJobs()">
    <select id="roleFilter" class="search-box" onchange="filterJobs()" style="max-width:200px;">
      <option value="all">All Roles</option>
      <option value="Developer">Developer</option>
      <option value="Designer">Designer</option>
      <option value="Data Analyst">Data Analyst</option>
      <option value="Manager">Manager</option>
      <option value="Engineer">Engineer</option>
    </select>
    <select id="locationFilter" class="search-box" onchange="filterJobs()" style="max-width:200px;">
      <option value="all">All Locations</option>
      <option value="Bangalore">Bangalore</option>
      <option value="Chennai">Chennai</option>
      <option value="Delhi">Delhi</option>
      <option value="Pune">Pune</option>
      <option value="Mumbai">Mumbai</option>
    </select>
  </div>
</section>

<section class="jobs" id="jobsContainer" style="padding:20px;max-width:1200px;margin:0 auto;">
  {% if jobs %}
    {% for job in jobs %}
    <div class="job-card" 
         data-role="{{ job.role or '' }}" 
         data-location="{{ job.location or '' }}" 
         data-title="{{ job.title|lower if job.title else '' }}" 
         data-company="{{ job.company|lower if job.company else '' }}">
      
      <h3 class="job-title">{{ job.title or 'Untitled Job' }}</h3>
      <p><strong>üè¢ Company:</strong> {{ job.company or 'Company' }}</p>
      <span class="verified-badge">‚úî Verified Employer</span>
      
      <p><strong>üíº Role:</strong> {{ job.role or 'Not specified' }}</p>
      <p><strong>üìç Location:</strong> {{ job.location or 'Remote' }}</p>
      <div class="job-salary">üí∞ {{ job.salary or 'Negotiable' }}</div>
      
      <p style="margin:15px 0;color:#555;">
        {% if job.description %}{{ job.description[:150] }}{% if job.description|length > 150 %}...{% endif %}{% else %}No description{% endif %}
      </p>
      
      <p style="font-size:0.9em;color:#888;">
        üÜî Job ID: {{ job.id }} | üìÖ Posted Recently
      </p>
      
      <!-- ‚úÖ NO JS - PURE LINK -->
      <a href="/apply/{{ job.id }}" class="apply-btn">üöÄ Apply Now</a>
    </div>
    {% endfor %}
  {% else %}
    <div class="jobs-empty">
      <h2>üì≠ No jobs available</h2>
      <p>Employers are posting new jobs daily!</p>
      <a href="{{ url_for('jobs') }}" style="color:#0d6efd;font-weight:bold;">üîÑ Refresh</a>
    </div>
  {% endif %}
</section>

<footer style="text-align:center;padding:20px;color:#666;background:#f8f9fa;margin-top:40px;">
  ¬© 2026 Amdox Jobs
</footer>

<script>
function filterJobs(){
  const role=document.getElementById("roleFilter").value;
  const location=document.getElementById("locationFilter").value;
  const search=document.getElementById("searchInput").value.toLowerCase();
  document.querySelectorAll(".job-card").forEach(job=>{
    const roleMatch=role==="all"||job.dataset.role===role;
    const locationMatch=location==="all"||job.dataset.location===location;
    const searchMatch=job.dataset.title.includes(search)||job.dataset.company.includes(search);
    job.style.display=(roleMatch&&locationMatch&&searchMatch)?"block":"none";
  });
}
</script>
</body>
</html>
